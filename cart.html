<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Asail Store</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="bg-dark text-light d-flex flex-column min-vh-100">
    <!-- Main Content Wrapper -->
    <main class="flex-grow-1">
        <!-- Navigation Bar - Sticky with Logo (Same as index.html) -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-secondary sticky-top shadow-lg">
            <div class="container">
                <!-- Logo and Brand -->
                <a class="navbar-brand d-flex align-items-center" href="index.html">
                    <div class="logo-container me-2">
                        <svg width="40" height="40" viewBox="0 0 100 100" class="logo-svg">
                            <circle cx="50" cy="50" r="45" fill="#17a2b8" stroke="#ffffff" stroke-width="3"/>
                            <text x="50" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" 
                                  text-anchor="middle" fill="white">AS</text>
                            <path d="M30 60 L70 60 M25 65 L75 65 M35 70 L65 70" stroke="white" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="brand-text">
                        <span class="fw-bold text-info fs-4">Asail Store</span>
                        <div class="brand-tagline">Premium Shopping</div>
                    </div>
                </a>
                
                <!-- Mobile Toggle Button -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <!-- Navigation Links -->
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">
                                üè† Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="cart.html">
                                üõí Cart
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#about">
                                ‚ÑπÔ∏è About
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#contact">
                                üìû Contact
                            </a>
                        </li>
                    </ul>
                    
                    <!-- Right side navigation -->
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">
                                ‚Üê Continue Shopping
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Cart Header -->
        <div class="container mt-4">
            <div class="row">
                <div class="col-12">
                    <h2 class="text-info mb-4">üõí Your Shopping Cart</h2>
                </div>
            </div>
            
            <div class="row">
                <!-- Cart Items Column -->
                <div class="col-lg-8">
                    <div id="cartItemsContainer" class="mb-4">
                        <!-- Cart items will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Order Summary Column -->
                <div class="col-lg-4">
                    <div class="card product-card cart-summary-card">
                        <div class="card-body">
                            <h5 class="card-title text-center mb-4">Order Summary</h5>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Total Items:</span>
                                <span id="totalItems">0</span>
                            </div>
                            <div class="d-flex justify-content-between mb-4">
                                <strong>Total Price:</strong>
                                <strong class="text-info" id="totalPrice">$0.00</strong>
                            </div>
                            <button class="btn btn-success w-100 mb-2 py-2" onclick="checkout()">
                                üî• Proceed to Checkout
                            </button>
                            <button class="btn btn-outline-danger w-100 py-2" onclick="clearCart()">
                                üóëÔ∏è Clear Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Simple Sticky Footer -->
    <footer class="footer mt-auto py-3 bg-dark border-top border-secondary">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="d-flex align-items-center">
                        <div class="logo-container me-2">
                            <svg width="25" height="25" viewBox="0 0 100 100" class="logo-svg">
                                <circle cx="50" cy="50" r="45" fill="#17a2b8" stroke="#ffffff" stroke-width="3"/>
                                <text x="50" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" 
                                      text-anchor="middle" fill="white">AS</text>
                                <path d="M30 60 L70 60 M25 65 L75 65 M35 70 L65 70" stroke="white" stroke-width="2"/>
                            </svg>
                        </div>
                        <span class="text-info fw-bold">Asail Store</span>
                    </div>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="text-muted mb-0">
                        ¬© 2024 Asail Store. All rights reserved. | 
                        <a href="#" class="text-info text-decoration-none">Privacy</a> | 
                        <a href="#" class="text-info text-decoration-none">Terms</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <!-- Cart JavaScript -->
    <script>
        // Load cart data from localStorage and display
        document.addEventListener('DOMContentLoaded', function() {
            displayCartItems();
        });

        function displayCartItems() {
            const cart = JSON.parse(localStorage.getItem('asail_cart') || '[]');
            const container = document.getElementById('cartItemsContainer');
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-5">
                        <h4 class="text-muted">Your cart is empty</h4>
                        <p class="text-muted">Add some amazing products to get started!</p>
                        <a href="index.html" class="btn btn-primary mt-3">üõçÔ∏è Continue Shopping</a>
                    </div>
                `;
                updateSummary([]);
                return;
            }

            container.innerHTML = cart.map((item, index) => `
                <div class="card product-card cart-product-card">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-md-2 col-3">
                                <img src="${item.image}" class="img-fluid rounded cart-product-img" 
                                     alt="${item.title}">
                            </div>
                            <div class="col-md-5 col-6">
                                <h6 class="text-white mb-1">${item.title}</h6>
                                <p class="text-info mb-2">$${item.price.toFixed(2)} each</p>
                            </div>
                            <div class="col-md-3 col-6 mt-2 mt-md-0">
                                <div class="d-flex align-items-center">
                                    <label class="me-2 small">Qty:</label>
                                    <input type="number" class="form-control bg-dark text-light border-secondary cart-quantity-input" 
                                           value="${item.quantity}" min="1" max="99"
                                           onchange="updateQuantity(${item.id}, this.value)">
                                </div>
                            </div>
                            <div class="col-md-2 col-6 mt-2 mt-md-0 text-end">
                                <strong class="text-info">$${(item.price * item.quantity).toFixed(2)}</strong>
                            </div>
                            <div class="col-md-1 col-6 mt-2 mt-md-0 text-end">
                                <button class="btn btn-outline-danger btn-sm cart-remove-btn" 
                                        onclick="removeFromCart(${item.id})" title="Remove item">
                                    üóëÔ∏è Remove
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            updateSummary(cart);
        }

        function updateQuantity(productId, newQuantity) {
            let cart = JSON.parse(localStorage.getItem('asail_cart') || '[]');
            const item = cart.find(item => item.id === productId);
            
            if (item && newQuantity > 0) {
                item.quantity = parseInt(newQuantity);
                localStorage.setItem('asail_cart', JSON.stringify(cart));
                displayCartItems(); // Refresh the display
            }
        }

        function removeFromCart(productId) {
            let cart = JSON.parse(localStorage.getItem('asail_cart') || '[]');
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('asail_cart', JSON.stringify(cart));
            displayCartItems();
            
            // Show notification
            showNotification('Item removed from cart', 'success');
        }

        function updateSummary(cart) {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('totalPrice').textContent = `$${totalPrice.toFixed(2)}`;
        }

        function clearCart() {
            if (confirm('Are you sure you want to clear your cart?')) {
                localStorage.removeItem('asail_cart');
                displayCartItems();
                showNotification('Cart cleared successfully', 'success');
            }
        }

        function checkout() {
            const cart = JSON.parse(localStorage.getItem('asail_cart') || '[]');
            if (cart.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }
            
            // Simulate checkout process
            showNotification('üéâ Order placed successfully! Thank you for shopping with us!', 'success');
            
            // Clear cart after successful checkout
            setTimeout(() => {
                localStorage.removeItem('asail_cart');
                displayCartItems();
            }, 2000);
        }

        // Show notification messages (same as main.js)
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type === 'error' ? 'danger' : 'success'} position-fixed`;
            notification.style.cssText = `
                top: 20px;
                right: 20px;
                z-index: 9999;
                min-width: 300px;
                animation: slideInRight 0.3s ease;
            `;
            notification.innerHTML = `
                <div class="d-flex justify-content-between align-items-center">
                    <span>${message}</span>
                    <button type="button" class="btn-close" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }

        // Add the slideInRight animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>